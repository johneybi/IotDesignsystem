/* Button.module.css */

.root {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--comp-button-size);
  height: var(--comp-button-size);
  border-radius: var(--comp-button-radius);
  border: 1px solid #c7c7c7; 
  cursor: pointer;
  outline: none;
  font-family: inherit;
  transition: all 0.2s ease;
  user-select: none;
  padding: 0;
  margin: 0;
  color: #555;
  font-size: 14px;
  -webkit-tap-highlight-color: transparent;
  background-clip: padding-box;
  
  position: relative;
  isolation: isolate; /* For blend modes */
}

/* Common Pseudo-elements for Shadows */
.root::before,
.root::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
  transition: box-shadow 0.2s ease;
  opacity: 0.8; /* Increased opacity for better visibility */
}

/* Zero states (reset) */
.root::before { mix-blend-mode: multiply; }
.root::after { mix-blend-mode: screen; }

.root:focus,
.root:focus-visible,
.root:hover {
  outline: none;
}

/* Binary = off (Default/Normal) - Outer Shadows */
.off {
  background: var(--comp-button-bg-enabled);
  /* box-shadow removed, handled by pseudos */
}

/* Dark Shadow (Bottom-Right) */
.off::before {
  box-shadow: 2px 2px 4px var(--color-shadow-dark);
}

/* Light Shadow (Top-Left) */
.off::after {
  box-shadow: -2px -2px 4px var(--color-shadow-light);
}

/* Binary = on (Pressed/Active) - Inset Shadows */
.on {
  background: var(--comp-button-bg-active);
  /* box-shadow removed */
  color: var(--comp-button-icon-color-active);
}

/* Dark Inner Shadow (Top-Left) */
.on::before {
  box-shadow: inset 2px 2px 4px var(--color-shadow-dark);
}

/* Light Inner Shadow (Bottom-Right) */
.on::after {
  box-shadow: inset -2px -2px 4px var(--color-shadow-light);
}

/* Binary = disabled */
.disabled {
  background: var(--comp-button-bg-enabled);
  border-color: var(--comp-button-border-disabled);
  box-shadow: var(--comp-button-shadow-disabled); /* Keeping specific disabled shadow for now, or could refactor */
  color: var(--comp-button-text-disabled);
  cursor: not-allowed;
  opacity: var(--comp-button-opacity-disabled);
}

/* Disable blended shadows for disabled state to avoid weirdness */
.disabled::before,
.disabled::after {
  box-shadow: none;
  opacity: 0;
}

.icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Ensure icon stays on top of any potential overlay */
  z-index: 1; 
}

.icon svg {
  width: 100%;
  height: 100%;
  fill: currentColor;
}
